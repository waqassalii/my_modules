<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="proforma_document_tax_totals">
        <!--
            Generic template to display tax totals in pdf reports.
            Used by invoices, SO and PO.
    
            ARGUMENTS:
            - tax_totals: dict in the form generated by account.move's _get_tax_totals.
        -->
        <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
            <tr class="border-black o_subtotal">
                <td>
                    <strong t-esc="subtotal['name']"/>
                </td>

                <td class="text-right">
                    <span
                            t-att-class="oe_subtotal_footer_separator"
                            t-esc="subtotal['formatted_amount']"
                    />
                </td>
            </tr>

            <t t-set="subtotal_to_show" t-value="subtotal['name']"/>
        </t>

        <!-- Show balance used -->

        <t t-if="env.context.get('proforma', False) or is_pro_forma">
            <t t-if="doc.delivery_charge &gt; 0">
                <tr>
                    <td>مصاريف الشحن</td>

                    <td class="text-right">
                        <t t-esc="doc.delivery_charge_val"/>
                    </td>
                </tr>
            </t>
            <t t-if="doc.service_charge &gt; 0">
                <tr>
                    <td>مصاريف الخدمة</td>

                    <td class="text-right">
                        <t t-esc="doc.service_charge_val"/>
                    </td>
                </tr>
            </t>
            <tr>
                <td>الضريبة</td>

                <td class="text-right">
                    <t t-esc="tax_totals['total_tax']"/>
                </td>
            </tr>
            <t t-if="delivered">
                <t t-if="doc.delivered_discount &lt; 0">
                    <tr>
                        <td>الخصم</td>

                        <td class="text-right">
                            <t t-esc="doc.get_delivered_discount()"/>
                        </td>
                    </tr>
                </t>
            </t>
            <t t-if="not delivered">
                <t t-if="doc.transit_discount &lt; 0">
                    <tr>
                        <td>الخصم</td>

                        <td class="text-right">
                            <t t-esc="doc.get_transit_discount()"/>
                        </td>
                    </tr>
                </t>
            </t>
        </t>

        <!--Total
        amount with all taxes-->
        <tr class="border-black o_total">
            <td>
                <strong>الإجمالي</strong>
            </td>
            <td class="text-right">
                <span t-esc="tax_totals['formatted_total_due']"/>
            </td>
        </tr>
        <tr class="border-black o_total" t-if="doc.use_credit_balance > 0">
            <td>
                <strong>المبلغ المستخدم</strong>
            </td>
            <td class="text-right">
                -<t t-esc="doc.get_formatted_balance()"/>
            </td>
        </tr>
        <tr class="border-black o_total">
            <td>
                <strong>مبلغ مستحق</strong>
            </td>
            <td class="text-right">
                <span t-esc="tax_totals['formatted_amount_total']"/>
            </td>
        </tr>
    </template>
    
</odoo>